<ion-header>
  <ion-toolbar>
    <ion-title>Headr</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-segment mode="ios" value="maps" (ionChange)="segment($event)">
    <ion-segment-button value="maps">
      <ion-label>Mapa</ion-label>
    </ion-segment-button>
    <ion-segment-button value="list">
      <ion-label>Lista</ion-label>
    </ion-segment-button>
  </ion-segment>
  <div *ngIf="value === 'maps'; else list">
    <!-- <div #map id="map"></div> -->
    <agm-map [latitude]="+res.latitude" [longitude]="+res.longitude" [zoom]="18">
      <agm-marker  *ngFor="let m of companies$ | async"
      [latitude]="m.distance.latitude"
      [longitude]="m.distance.longitude"
      iconUrl="./assets/images/icon.png"
      [markerDraggable]="false">
        <agm-info-window >
          <h5 class="mb-0" style="color: #000">{{ m.name }}</h5>
          <app-stars-widget [num]="getRandom()"></app-stars-widget>
          <p class="mb-0 ion-text-wrap" style="color: #000">{{ m.address }}</p>
          <ion-button (click)="clickedMarker(m)" fill="clear">Send Service</ion-button>
        </agm-info-window>
      </agm-marker>
    </agm-map>
  </div>
</ion-content>
<ion-footer>
  <ion-toolbar>
    <ion-title (click)="onClose()">Fechar</ion-title>
  </ion-toolbar>
</ion-footer>

<ng-template #list>
  <ion-list>
    <ion-item *ngFor="let item of companies$ | async">
      <ion-label>
        <h3>{{ item.name }}</h3>
        <app-stars-widget [num]="getRandom()"></app-stars-widget>
        <p>Distancia {{ item.distance.distance }}</p>
        <p>Tempo estimado {{ item.distance.duration }}</p>
        <p class="ion-text-wrap">{{ item.address }}</p>
        <ion-button (click)="clickedMarker(item)" color="danger" size="small">
          Send Service
        </ion-button>
      </ion-label>
    </ion-item>
  </ion-list>
</ng-template>
